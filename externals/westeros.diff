/**
* If not stated otherwise in this file or this component's LICENSE
* file the following copyright and licenses apply:
*
* Copyright 2024 RDK Management
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
**/

diff --git a/Makefile.ubuntu b/Makefile.ubuntu
index 2e5f3cb..b0cee2b 100644
--- a/Makefile.ubuntu
+++ b/Makefile.ubuntu
@@ -27,7 +27,7 @@ clean: init
 cleanall: initall
 
 setenv= \
-	export PKG_CONFIG_PATH=$(WID)/lib/pkgconfig:$(WID)/share/pkgconfig && \
+	export PKG_CONFIG_PATH=$(PKG_CONFIG_PATH):$(WID)/lib/pkgconfig:$(WID)/share/pkgconfig && \
 	export ACLOCAL_PATH=$(WID)/share/aclocal && \
 	export ACLOCAL="aclocal -I $ACLOCAL_PATH"
 
@@ -57,7 +57,7 @@ external:
 external/.proto:	
 	$(call setenv) && \
 	cd external && \
-	git clone git://anongit.freedesktop.org/xcb/proto && \
+	git clone https://anongit.freedesktop.org/git/xcb/proto && \
 	cd proto && \
 	./autogen.sh --prefix $(WID) && \
 	make && make install && \
@@ -67,7 +67,7 @@ external/.proto:
 external/.macros:
 	$(call setenv) && \
 	cd external && \
-	git clone git://anongit.freedesktop.org/xorg/util/macros && \
+	git clone https://anongit.freedesktop.org/git/xorg/util/macros && \
 	cd macros && \
 	./autogen.sh --prefix $(WID) && \
 	make && make install && \
@@ -77,7 +77,7 @@ external/.macros:
 external/.libxcd:
 	$(call setenv) && \
 	cd external && \
-	git clone git://anongit.freedesktop.org/xcb/libxcb && \
+	git clone https://anongit.freedesktop.org/git/xcb/libxcb && \
 	cd libxcb && \
 	./autogen.sh --prefix $(WID) && \
 	make && make install && \
@@ -87,10 +87,12 @@ external/.libxcd:
 external/.libxkbcommon:
 	$(call setenv) && \
 	cd external && \
-	git clone git://github.com/xkbcommon/libxkbcommon && \
+	git clone https://github.com/xkbcommon/libxkbcommon && \
 	cd libxkbcommon && \
-	./autogen.sh --prefix $(WID) && \
-	make && make install && \
+	git checkout 75ec764ceec9aacddfd34f6066f2d5e7cafc8c51 && \
+        git apply ../../../westeros_libxkbcommon.diff && \
+        ./autogen.sh --prefix $(WID) && \
+        make && make install && \
 	cd .. && \
 	touch .libxkbcommon
 
@@ -99,10 +101,10 @@ external/.wayland:
 	cd external && \
 	mkdir wayland && \
 	cd wayland && \
-	wget http://wayland.freedesktop.org/releases/wayland-1.6.0.tar.xz && \
+	wget --no-check-certificate http://wayland.freedesktop.org/releases/wayland-1.6.0.tar.xz && \
 	tar xf wayland-1.6.0.tar.xz && \
 	cd wayland-1.6.0 && \
-	./configure --prefix $(WID) && \
+	./configure --prefix $(WID) --disable-documentation && \
 	make && make install && \
 	cd ../.. && \
 	touch .wayland
@@ -150,6 +152,7 @@ simpleshell/protocol/simpleshell-protocol.c:
 westeros-simpleshell:
 	$(call setenv) && \
 	cd simpleshell && \
+	mkdir -p m4 && \
 	aclocal -I cfg && \
 	libtoolize --automake && \
 	autoheader && \
@@ -161,6 +164,7 @@ westeros-simpleshell:
 
 westeros-core:
 	$(call setenv) && \
+	mkdir -p m4 && \
 	aclocal -I cfg && \
 	libtoolize --automake && \
 	autoheader && \
diff --git a/configure.ac b/configure.ac
index f6284f6..b3a7821 100644
--- a/configure.ac
+++ b/configure.ac
@@ -225,18 +225,18 @@ AM_CONDITIONAL([ENABLE_MODULES], [test x$ENABLE_MODULES = xtrue])
 
 AM_COND_IF([ENABLE_MODULES], [AC_CONFIG_SUBDIRS([drm/modules])])
 
-GST_MAJORMINOR=1.0
-PKG_CHECK_MODULES([GST], [gstreamer-1.0 >= 1.0], have_gst1="yes", have_gst1="no")
-
-AS_IF([test "x$have_gst1" = "xyes"], [
-  PKG_CHECK_MODULES([GSTBASE], [gstreamer-base-1.0 >= 1.0])
-  AC_DEFINE(USE_GST1, 1, [Build with GStreamer 1.x])
-], [])
-
-AS_IF([test "x$enable_gstreamer0" != "xyes" -a "x$have_gst1" != "xyes"], [
-   AC_MSG_ERROR([Could not find GStreamer 1.x dependencies:
-
-$GST_PKG_ERRORS])], [])
+#GST_MAJORMINOR=1.0
+#PKG_CHECK_MODULES([GST], [gstreamer-1.0 >= 1.0], have_gst1="yes", have_gst1="no")
+#
+#AS_IF([test "x$have_gst1" = "xyes"], [
+#  PKG_CHECK_MODULES([GSTBASE], [gstreamer-base-1.0 >= 1.0])
+#  AC_DEFINE(USE_GST1, 1, [Build with GStreamer 1.x])
+#], [])
+#
+#AS_IF([test "x$enable_gstreamer0" != "xyes" -a "x$have_gst1" != "xyes"], [
+#   AC_MSG_ERROR([Could not find GStreamer 1.x dependencies:
+#
+#$GST_PKG_ERRORS])], [])
 
 WAYLANDLIB="-lwayland-server"
 AC_SUBST(WAYLANDLIB)
